## 쿼리 메소드 기능

---
### 메소드 이름으로 쿼리 생성
#### ex) findByUsernameAndAgeGreaterThan(String username, int age)

#### 가능한 메소드양식 [메뉴얼 보러가기](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation)

####  하지만 이렇게 메소드 이름으로 쿼리생성하는 방식은 메소드 이름이 많이 길어질 수 있는 단점이 있다.

---
#### 메소드 룰은 find ... By , read ... By , query ... By , get ... By
#### ... 에 넣고 싶은 이름넣어 만들면 되구 (이때 By뒤에 아무것도 없으면 전체조회)

#### 참고 [메소드이름](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#reference)

#### COUNT 는 count ... By 로 long 타입 반환
#### EXIST 는 exists ... By 로 boolean 타입 반환
#### 삭제는 delete ... By, remove ... By 반환타입은 long
#### DISTINCT 는 findDistinct, findMemberDistinctBy 식으로 작성
#### LIMIT 은 findFirst3, findFirst, findTop, findTop3 식으로 작성

#### 참고 [리밋](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.limit-query-result)

---

### JPA Named Query 
#### 메소드 이름으로 JPA Named Query 호출 (실무에서는 거의 안쓴다.)
#### Spring Data Jpa 의 우선순위는  먼저 테이블엔티티.메소드 로 NamedQuery 를 찾고, 없으면 메소드생성으로 메소드를 만든다. 때문에
#### Named Query 사용시 메소드와 NamedQuery 의 이름을 맞춰준다면 @Query 를 붙여주지 않아도 되긴하다.
#### Named Query 는 잘 안쓰지만 큰 장점이 하나 있다 그것은
#### 애플리케이션 로딩 시점에 쿼리를 검사해서 사용하지않더라도 잘못된 오류가있으면 에러로 알려준다.

---

### @Query, 리포지토리 메소드에 쿼리 정의하기 (실무에서 제일 많이 쓴다.)
#### @Query 는 이름이 없는 Named Query 와도 마찬가지여서 Named Query 의 장점 또한 가져갈 수 있따.

---

### @Query , 값 , DTO 조회하기 (단순한 값이나 DTO 조회시에 쓰이며 실무에서 많이 씀)
```java
    @Query("select m.username from Member m")
    List<String> findUsernameList();
```
#### 그냥 이렇게 단순하게 가져오면 된다.
#### 여러 값들을 가져올 때는 DTO 를 따로 만든다
```java
package study.datajpa.dto;
    ...
@Data
public class MemberDto {

    private Long id;
    private String username;
    private String teamName;

    public MemberDto(Long id, String username, String teamName) {
        this.id = id;
        this.username = username;
        this.teamName = teamName;
    }
}

    // 사용
    @Query("select new study.datajpa.dto.MemberDto(m.id, m.username, t.name) from Member m join m.team t")
    List<MemberDto> findMemberDto();
```
#### 이런식으로 사용
